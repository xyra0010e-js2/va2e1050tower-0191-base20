<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Admin Nube</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-900 text-white min-h-screen font-sans p-6">

    <div class="max-w-2xl mx-auto">
        <h1 class="text-2xl font-bold text-emerald-400 mb-6">Panel de Control (Nube)</h1>

        <!-- ConfiguraciÃ³n -->
        <div class="bg-slate-800 p-6 rounded-xl mb-6 border border-slate-700">
            <h2 class="font-bold mb-4">Editar Portada</h2>
            <input type="text" id="titulo" placeholder="TÃ­tulo Principal" class="w-full mb-3 p-2 bg-slate-700 rounded text-white">
            <input type="text" id="mensaje" placeholder="Mensaje de bienvenida" class="w-full mb-3 p-2 bg-slate-700 rounded text-white">
            <button onclick="guardarConfig()" class="bg-emerald-600 px-4 py-2 rounded font-bold hover:bg-emerald-500 w-full">Actualizar Web</button>
        </div>

        <!-- Agregar Producto -->
        <div class="bg-slate-800 p-6 rounded-xl border border-slate-700">
            <h2 class="font-bold mb-4">Agregar Item</h2>
            <input type="text" id="prod-titulo" placeholder="Nombre" class="w-full mb-3 p-2 bg-slate-700 rounded text-white">
            <input type="text" id="prod-desc" placeholder="DescripciÃ³n" class="w-full mb-3 p-2 bg-slate-700 rounded text-white">
            <input type="text" id="prod-precio" placeholder="Precio" class="w-full mb-3 p-2 bg-slate-700 rounded text-white">
            <button onclick="guardarProducto()" class="bg-blue-600 px-4 py-2 rounded font-bold hover:bg-blue-500 w-full">Publicar Item</button>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getFirestore, collection, addDoc, setDoc, doc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        // -------------------------------------------------------------
        // ðŸ”´ 1. BORRA ESTO Y PEGA TU 'const firebaseConfig' AQUÃ ABAJO ðŸ”´
        
        const firebaseConfig = {

  apiKey: "AIzaSyDr490X-m0dw5wnQaTmyhjjzd1TRJgEMcs",

  authDomain: "mi-web-app-f0523.firebaseapp.com",

  projectId: "mi-web-app-f0523",

  storageBucket: "mi-web-app-f0523.firebasestorage.app",

  messagingSenderId: "509336040232",

  appId: "1:509336040232:web:b41a777c6dd63ba350d61d",

  measurementId: "G-1BFT6DZEV5"

};


        // -------------------------------------------------------------

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Hacer las funciones globales para que funcionen con los botones HTML
        window.guardarConfig = async () => {
            const t = document.getElementById('titulo').value;
            const m = document.getElementById('mensaje').value;
            
            try {
                // Escribir en la base de datos de la nube
                await setDoc(doc(db, "web", "configuracion"), {
                    titulo: t,
                    mensaje: m
                });
                alert("Â¡Actualizado en la nube!");
            } catch (e) {
                console.error(e);
                alert("Error: " + e.message);
            }
        };

        window.guardarProducto = async () => {
            const t = document.getElementById('prod-titulo').value;
            const d = document.getElementById('prod-desc').value;
            const p = document.getElementById('prod-precio').value;

            try {
                await addDoc(collection(db, "productos"), {
                    titulo: t, desc: d, precio: p
                });
                alert("Â¡Producto publicado!");
                // Limpiar inputs
                document.getElementById('prod-titulo').value = "";
            } catch (e) {
                console.error(e);
                alert("Error: " + e.message);
            }
        };
    </script>
</body>
</html>
