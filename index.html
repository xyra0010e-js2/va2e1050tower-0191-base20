<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Web Internacional</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
</head>
<body class="bg-gray-50 text-gray-800 font-sans">

    <!-- NavegaciÃ³n -->
    <nav class="bg-white shadow p-4 sticky top-0 z-50">
        <div class="max-w-4xl mx-auto flex justify-between items-center">
            <h1 class="text-xl font-bold text-indigo-600 flex items-center gap-2">
                <i class="ph-fill ph-globe-hemisphere-west"></i> <span id="nav-titulo">Cargando...</span>
            </h1>
        </div>
    </nav>

    <main class="max-w-4xl mx-auto mt-8 p-4">
        
        <!-- Bienvenida -->
        <div class="bg-indigo-100 rounded-2xl p-8 mb-8 text-center shadow-sm">
            <h2 id="titulo-web" class="text-3xl font-bold text-indigo-900 mb-2">...</h2>
            <p id="mensaje-web" class="text-indigo-700">Conectando con el servidor...</p>
        </div>

        <!-- Lista de Items -->
        <div id="items-container" class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <!-- AquÃ­ aparecerÃ¡n los datos de la nube -->
        </div>

    </main>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getFirestore, collection, onSnapshot, doc } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        // -------------------------------------------------------------
        // ðŸ”´ 1. BORRA ESTO Y PEGA TU 'const firebaseConfig' AQUÃ ABAJO ðŸ”´
        // (Debe quedar: const firebaseConfig = { apiKey: "...", ... }; )
        
        const firebaseConfig = {

  apiKey: "AIzaSyDr490X-m0dw5wnQaTmyhjjzd1TRJgEMcs",

  authDomain: "mi-web-app-f0523.firebaseapp.com",

  projectId: "mi-web-app-f0523",

  storageBucket: "mi-web-app-f0523.firebasestorage.app",

  messagingSenderId: "509336040232",

  appId: "1:509336040232:web:b41a777c6dd63ba350d61d",

  measurementId: "G-1BFT6DZEV5"

};

        // -------------------------------------------------------------

        // Iniciar Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // 1. Escuchar ConfiguraciÃ³n (TÃ­tulo y Mensaje)
        onSnapshot(doc(db, "web", "configuracion"), (doc) => {
            if (doc.exists()) {
                const data = doc.data();
                document.getElementById('nav-titulo').innerText = data.titulo || "Mi Web";
                document.getElementById('titulo-web').innerText = data.titulo || "Bienvenido";
                document.getElementById('mensaje-web').innerText = data.mensaje || "Esperando novedades...";
            }
        });

        // 2. Escuchar Lista de Items
        onSnapshot(collection(db, "productos"), (snapshot) => {
            const container = document.getElementById('items-container');
            container.innerHTML = ''; // Limpiar

            snapshot.forEach((doc) => {
                const item = doc.data();
                const html = `
                    <div class="bg-white p-4 rounded-xl shadow-sm border border-gray-100 hover:shadow-md transition-shadow">
                        <div class="flex justify-between items-start">
                            <h4 class="font-bold text-lg text-gray-800">${item.titulo}</h4>
                        </div>
                        <p class="text-gray-600 mt-2 text-sm">${item.desc}</p>
                        <div class="mt-4 pt-4 border-t border-gray-100 font-bold text-indigo-600">
                            ${item.precio ? '$' + item.precio : 'Info'}
                        </div>
                    </div>
                `;
                container.innerHTML += html;
            });
        });
    </script>
</body>
</html>
